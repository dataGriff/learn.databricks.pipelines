image:
  file: .cde.Dockerfile

tasks:
  - name: Install Tools
    init: |
      sh ./cde/install_tools.sh
      gp sync-done waitontools
  - name: Azure Login
    command: |
      gp sync-await waitontools
      sh ./cde/azure_login_sp.sh
      gp sync-done azurelogin
  - name: Versions
    command: |
      gp sync-await waitontools
      sh ./cde/environment_versions.sh
  - name: Variables
    command: |
      sh ./cde/environment_variables.sh
  - name: Configure Databricks
    command: |
      gp sync-await azurelogin
      sh ./cde/databricks_configure.sh
  - name: Example Spark Shell
    command: |
      gp sync-await waitontools
      sh ./cde/spark_run.sh
  - name: Example Pyspark
    command: |
      gp sync-await waitontools
      python ./cde/main.py
  - name: Template DAB Deploy
    command: |
      gp sync-await waitontools
      python ./cde/databricks_deploy.sh

vscode:
  extensions:
    - ms-python.python
    - databricks.databricks
    - databricks.sqltools-databricks-driver